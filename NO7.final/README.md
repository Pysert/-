# Classic Tetris Game

**一个基于DOSBox+MASM开发的16位汇编语言俄罗斯方块游戏**

---

## 📋 项目简介

这是一个使用16位x86汇编语言开发的经典俄罗斯方块游戏，作为汇编语言课程的期末项目。项目实现了完整的俄罗斯方块游戏功能，包括方块生成、移动、旋转、消除、计分等核心机制，同时还添加了难度模式、计时系统、最好成绩记录等增强功能。

---

## ✨ 功能特点

### 🎮 核心游戏功能

- ✅ **7种方块类型**：正方形、横条、竖条、L形、T形、Z形（两种旋转状态）
- ✅ **完整的游戏逻辑**：方块自动下落、左右移动、旋转、碰撞检测
- ✅ **行消除系统**：满行自动消除，上方方块下移
- ✅ **游戏结束判定**：方块堆积到顶部时自动结束游戏

### 🎯 游戏模式

- **普通模式（Normal Mode）**
  - 固定下落速度
  - 难度级别始终为0
  - 适合新手熟悉游戏操作

- **难度模式（Difficulty Mode）**
  - 动态难度调整：每20秒自动提升一个难度级别
  - 速度递增：随着难度级别增加，方块下落速度逐渐加快
  - 实时难度显示：显示当前难度级别（Level 1, 2, 3...）
  - 最好成绩记录：自动记录并显示难度模式下的最高分数

### 🎨 界面系统

- **精美的开始菜单**：ASCII艺术标题、彩色界面
- **直观的游戏界面**：左侧游戏区域，右侧信息面板
- **友好的结束界面**：游戏结束后按任意键返回开始菜单

### 📊 计分与计时系统

- **分数系统**：每消除一行获得10分，支持多位数显示（0-65535）
- **计时系统**：显示游戏进行时间（MM:SS格式）
- **最好成绩**：自动记录难度模式下的最高分数

---

## 🛠️ 开发环境

- **开发工具**：MASM (Microsoft Macro Assembler)
- **运行环境**：DOSBox（DOS模拟器）
- **编程语言**：16位x86汇编语言
- **内存模型**：`.model small`（小内存模型）
- **显示模式**：80x25文本模式

---

## 📦 文件结构

```
NO7.final/
├── block.asm              # 主程序文件（完整源代码）
├── README.md              # 项目说明文档
└── 项目开发文档.md        # 详细开发文档
```

---

## 🚀 编译与运行

### 前提条件

1. 安装 DOSBox 模拟器
2. 安装 MASM 汇编器和 LINK 链接器
3. 配置 DOSBox 挂载项目目录

### 编译步骤

在 DOSBox 中执行以下命令：

```bash
# 进入项目目录
cd NO7.final

# 编译汇编文件
masm block.asm;

# 链接目标文件
link block.obj;

# 运行程序
block.exe
```

或者使用批处理文件（如果存在）：

```bash
build.bat
```
---

## 🎮 操作说明

### 开始菜单

- **按 [1]**：进入普通模式
- **按 [2]**：进入难度模式
- **按 [3]**：退出游戏

### 游戏控制

- **方向键 ← →** 或 **A/D键**：左右移动方块
- **方向键 ↓** 或 **V键**：快速下落
- **方向键 ↑**：旋转方块
- **Q键**：退出游戏（返回开始菜单）

### 游戏规则

1. 方块从顶部自动下落
2. 使用方向键控制方块移动和旋转
3. 当一行完全填满时，该行会自动消除，上方方块下移
4. 每消除一行获得10分
5. 当方块堆积到顶部无法放置新方块时，游戏结束

---

## 📖 技术实现

### 核心技术

- **显存直接操作**：使用0B800h段地址直接操作显存，提高显示效率
- **BIOS中断调用**：
  - `int 10h`：显示输出和光标控制
  - `int 16h`：键盘输入处理（非阻塞模式）
  - `int 1Ah`：系统时钟获取
- **游戏循环设计**：主循环 → 输入处理 → 游戏逻辑 → 渲染更新
- **碰撞检测算法**：边界检测和方块重叠检测
- **行消除算法**：满行检测、行消除、方块下移

### 关键数据结构

- 方块定义：使用相对坐标数组定义7种方块类型
- 游戏状态：使用全局变量管理位置、类型、分数、难度等
- 时间管理：使用32位时钟滴答数计算游戏时间

---

## 📝 项目特色

1. **完整的游戏实现**：实现了俄罗斯方块的所有核心功能
2. **双模式设计**：普通模式和难度模式满足不同玩家需求
3. **美观的界面**：精心设计的ASCII艺术和彩色界面
4. **完善的文档**：详细的开发文档记录开发过程和心得
5. **代码规范**：模块化设计，清晰的函数命名和注释

---

## 🔮 未来改进方向

- [ ] 添加暂停功能
- [ ] 添加音效支持
- [ ] 优化方块旋转动画
- [ ] 添加更多难度级别选项
- [ ] 实现成绩排行榜
- [ ] 优化界面显示效果

---

## 📚 学习资源

### 相关课程内容

本项目涵盖了汇编语言课程的核心知识点：

- 指令系统和程序结构
- 段寄存器和内存管理
- BIOS中断调用
- I/O操作和显存操作
- 程序调试技术

### 参考文档

- MASM 汇编器用户手册
- DOS BIOS中断参考
- 16位汇编语言教程

---

## 👤 作者信息

**学号**：23542854  
**课程**：汇编语言 
**学期**：2025年秋
**本项目作为课程作业，仅用于学习和教育目的。**

---

## 🙏 致谢

- 感谢汇编语言课程老师的悉心指导
- 感谢课程提供的学习资源和参考资料
- 感谢DOSBox和MASM开发工具的支持

---

**祝您游戏愉快！🎮**

---

